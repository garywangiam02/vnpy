# ===v1版本

2020年08月03日策略分享会直播版本

接下来版本准备修改的内容
1. 增加各种必备的监测、账户统计等，并且通过钉钉发出

2. 由目前的固定金额开仓，变为非固定金额开仓

3. 支持横截面的选币因子


# ===v2版本

更新时间：2020年08月05日

更新内容：

# =1.再下单时增加了容错。

币安的整体接口比较稳定，在和服务器交互的时候一般不会遇到报错。

但永续合约在每天的0、8、16点会收取资金费率。在这些时刻的前后15s内下单，可能会报错（这是币安客服官方反馈的结果)。

为了避免以上报错中断程序，在下单时增加容错。遇到报错就sleep一段时间后重新继续下单。

在Functions.py新增函数retry_wrapper()，该函数用于一切函数的重试机制。详见该函数头的说明。


# =2. 整体程序增加荣作

在select_coin.py中，针对主函数main()增加容错。

当程序报错后，main()会sleep一段时间后重新运行，保证程序不会中断


# =3. 将用于交易的金额trade_usdt从固定变成可变。

v1版本中，用于交易的金额trade_usdt是固定的。程序运行一段时间后，不管是亏损还是盈利，下一笔交易的开仓金额永远是固定的。这不符合实际交易的需求。

并且当我们在实盘交易中会有这样的需求：根据自己对大势的主观判断，手工修改trade_usdt。例如判断后市行情有利于策略，择手工加大trade_usdt，不利于后市时，
则降低trade_usdt。
但是v1版本对这个需求支持的不好。当手工修改trade_usdt值后，不仅程序最新选币会使用最新的trade_usdt来下单，之前选出来的币，也会因为最新的trade_usdt
而相应的加仓减仓。显然后者并不是我们需要的。

v2版本代码对以上两种需求做出修改。主要改定点如下：

1) 在Config.py中新增参数Percent，用于确定使用账户金额的多少比例进行选币交易

2）在Config.py中新增参数Update_Day，Update_Hour。
假设当前用于交易的的trade_usdt金额为1000元。然后在每隔Update_Day天后的Update_Hour点，我们会重新计算下账户净值以及用于交易的trade_usdt。比如
由1000元变成了1200元。那么在Update_Hour点之后选出的币就是用1200元进行交易，Update_Hour点之前选出的币还是使用1000元进行交易。


# =4. 增加交易币种

在Config.py的symbol_list中增加交易币种。

并且可以通过如下方法，获取币安所有可交易币种的list
exchange_info = exchange.fapiPublic_get_exchangeinfo()
symbol_list = [x['symbol'] for x in exchange_info['symbols']]


# =5. 增加钉钉监测

在select_coin.py主函数中，增加函数send_dingding_msg_every_loop。
每次循环结束之后会发送钉钉监控。


# ==接下来版本准备修改的内容

1. 支持横截面的选币因子

2. 在Windows下，fetch_all_binance_swap_candle_data()函数并行获取k线数据比较慢，需要对并行机制做出优化
